import{j as e}from"./assets/index-DNcHv8Gn.js";import{r as a}from"./chunk-DJ1oPbzn.js";import{d as J}from"./chunk-xo-tfjFm.js";import"./chunk-B6LuprgX.js";const V=[{id:"fee-income",label:"管理費・積立金収入",description:"定期的な収入",color:"#10B981",accounts:[{code:"5101",label:"管理費収入",shortLabel:"管理費",keywords:["管理費","月額"],frequency:100,divisions:["KANRI"]},{code:"5201",label:"修繕積立金収入",shortLabel:"修繕積立金",keywords:["修繕","積立"],frequency:99,divisions:["SHUZEN"]}]},{id:"usage-income",label:"使用料・手数料収入",description:"施設利用等による収入",color:"#06B6D4",accounts:[{code:"5102",label:"駐車場使用料収入",shortLabel:"駐車場",keywords:["駐車場","パーキング","月極"],frequency:90,divisions:["KANRI"]},{code:"5103",label:"駐輪場使用料収入",shortLabel:"駐輪場",keywords:["駐輪場","自転車","バイク"],frequency:70,divisions:["KANRI"]},{code:"5104",label:"ルーフバルコニー使用料収入",shortLabel:"ルーフバルコニー",keywords:["ルーフバルコニー","屋上","バルコニー"],frequency:50,divisions:["KANRI"]},{code:"5105",label:"テラス使用料収入",shortLabel:"テラス",keywords:["テラス","専用庭","庭"],frequency:45,divisions:["KANRI"]},{code:"5106",label:"集会室使用料収入",shortLabel:"集会室",keywords:["集会室","ホール","共用施設"],frequency:40,divisions:["KANRI"]},{code:"5303",label:"延滞金収入",shortLabel:"延滞金",keywords:["遅延","延滞","遅延損害金"],frequency:10,divisions:["KANRI"]}]},{id:"other-income",label:"その他の収入",description:"雑収入など",color:"#8B5CF6",accounts:[{code:"5301",label:"受取利息",shortLabel:"利息",keywords:["利息","預金利息"],frequency:60,divisions:["BOTH"]},{code:"5302",label:"雑収入",shortLabel:"雑収入",keywords:["その他","雑","自販機"],frequency:70,divisions:["BOTH"]},{code:"5304",label:"受取保険金",shortLabel:"保険金",keywords:["保険","保険金"],frequency:20,divisions:["BOTH"]},{code:"5305",label:"補助金収入",shortLabel:"補助金",keywords:["補助金","助成金"],frequency:15,divisions:["BOTH"]}]},{id:"special-income",label:"特別収入",description:"臨時的な収入",color:"#F59E0B",accounts:[{code:"5401",label:"特別徴収金収入",shortLabel:"特別徴収金",keywords:["特別","徴収"],frequency:5,divisions:["SHUZEN"]},{code:"5402",label:"繰入金収入",shortLabel:"繰入金",keywords:["繰入","振替"],frequency:10,divisions:["SHUZEN"]}]}],z=[{id:"utilities",label:"水道光熱費",description:"電気・水道・ガスなど",color:"#EF4444",accounts:[{code:"6102",label:"水道光熱費",shortLabel:"水道光熱費",keywords:["電気","水道","ガス","灯油","電力"],frequency:100,divisions:["KANRI"]}]},{id:"management-fee",label:"管理業務費",description:"管理会社への支払いなど",color:"#F59E0B",accounts:[{code:"6101",label:"管理委託費",shortLabel:"管理委託",keywords:["管理会社","委託","清掃","設備保守","エレベーター","消防"],frequency:95,divisions:["KANRI"]}]},{id:"repair-maintenance",label:"修繕・保全費",description:"建物や設備の修理・改修",color:"#3B82F6",accounts:[{code:"6201",label:"修繕費",shortLabel:"修繕費",keywords:["修繕","修理","補修","緊急","予防保全"],frequency:85,divisions:["KANRI"]},{code:"6401",label:"修繕工事費",shortLabel:"大規模修繕",keywords:["大規模","改修","工事","計画修繕"],frequency:30,divisions:["SHUZEN"]},{code:"6402",label:"設計監理費",shortLabel:"設計監理",keywords:["設計","監理","建築士"],frequency:25,divisions:["SHUZEN"]}]},{id:"insurance-communication",label:"保険・通信費",description:"保険料や通信関連",color:"#059669",accounts:[{code:"6104",label:"保険料",shortLabel:"保険",keywords:["保険","共用部","火災","賠償"],frequency:75,divisions:["BOTH"]},{code:"6103",label:"通信費",shortLabel:"通信",keywords:["郵送","電話","インターネット"],frequency:70,divisions:["KANRI"]}]},{id:"office-expense",label:"事務費・会議費",description:"事務用品や会議関連",color:"#7C3AED",accounts:[{code:"6301",label:"消耗品費",shortLabel:"消耗品",keywords:["消耗品","事務用品","文具"],frequency:80,divisions:["KANRI"]},{code:"6306",label:"印刷費",shortLabel:"印刷",keywords:["印刷","コピー","製本"],frequency:60,divisions:["KANRI"]},{code:"6303",label:"会議費",shortLabel:"会議",keywords:["会議","理事会","総会"],frequency:50,divisions:["KANRI"]},{code:"6309",label:"旅費交通費",shortLabel:"交通費",keywords:["交通","旅費","実費精算"],frequency:55,divisions:["KANRI"]},{code:"6304",label:"役員手当",shortLabel:"役員手当",keywords:["役員","手当","報酬"],frequency:45,divisions:["KANRI"]}]},{id:"professional-fee",label:"専門家報酬",description:"税理士・弁護士など",color:"#DC2626",accounts:[{code:"6305",label:"専門家謝金",shortLabel:"専門家謝金",keywords:["顧問","税理士","弁護士","建築士","アドバイザー"],frequency:65,divisions:["BOTH"]}]},{id:"other-expense",label:"その他の支出",description:"その他の費用",color:"#6B7280",accounts:[{code:"6302",label:"支払手数料",shortLabel:"手数料",keywords:["振込","手数料","残高証明"],frequency:75,divisions:["BOTH"]},{code:"6307",label:"租税公課",shortLabel:"租税公課",keywords:["税金","印紙"],frequency:70,divisions:["KANRI"]},{code:"6308",label:"雑費",shortLabel:"雑費",keywords:["その他","雑"],frequency:65,divisions:["KANRI"]},{code:"6311",label:"諸会費",shortLabel:"諸会費",keywords:["自治会","加入団体"],frequency:40,divisions:["KANRI"]}]},{id:"special-expense",label:"特別支出",description:"臨時的な支出",color:"#991B1B",accounts:[{code:"6501",label:"繰出金",shortLabel:"繰出金",keywords:["繰出","振替","修繕会計"],frequency:15,divisions:["KANRI"]},{code:"6502",label:"雑損失",shortLabel:"雑損失",keywords:["損失","特別"],frequency:5,divisions:["BOTH"]}]}],X=[{id:"bank-transfer",label:"口座間振替",description:"銀行口座間の資金移動",color:"#10B981",accounts:[{code:"1102",label:"普通預金（管理）",shortLabel:"管理口座",keywords:["管理","普通預金"],frequency:90},{code:"1103",label:"普通預金（修繕）",shortLabel:"修繕口座",keywords:["修繕","普通預金"],frequency:85},{code:"1104",label:"定期預金",shortLabel:"定期預金",keywords:["定期"],frequency:50},{code:"1101",label:"現金",shortLabel:"現金",keywords:["現金","小口"],frequency:30}]}];function ve(i,d,u){const t=d==="income"?V:d==="expense"?z:X,b=[],r=i.toLowerCase();return t.forEach(m=>{m.accounts.forEach(f=>{if(u&&!Y(f,u))return;const O=Ne(f,r);O>0&&b.push({...f,frequency:O})})}),b.sort((m,f)=>(f.frequency||0)-(m.frequency||0))}function Ne(i,d){var t,b;let u=0;return i.code===d?1e3:(i.label.toLowerCase().includes(d)&&(u+=100),(t=i.shortLabel)!=null&&t.toLowerCase().includes(d)&&(u+=80),(b=i.keywords)==null||b.forEach(r=>{r.toLowerCase().includes(d)&&(u+=50)}),u>0&&(u+=(i.frequency||0)/10),u)}function xe(i,d,u=5){const t=i==="income"?V:i==="expense"?z:X,b=[];return t.forEach(m=>{b.push(...m.accounts)}),(d?b.filter(m=>Y(m,d)):b).sort((m,f)=>(f.frequency||0)-(m.frequency||0)).slice(0,u)}function Y(i,d){return i.divisions?i.divisions.includes(d)||i.divisions.includes("BOTH"):!0}const ke=({engine:i,onChange:d,onSubmit:u})=>{var ae;const[t,b]=a.useState("expense"),[r,m]=a.useState("KANRI"),[f,O]=a.useState(new Date().toISOString().split("T")[0]),[j,q]=a.useState(""),[$,L]=a.useState(""),[p,y]=a.useState(null),[R,x]=a.useState(""),[oe,G]=a.useState(!1),[ce,M]=a.useState(!1),[I,ie]=a.useState(new Date().toISOString().slice(0,7)),[D,T]=a.useState(""),[c,A]=a.useState({}),[U,k]=a.useState("kanri_bank"),[K,ee]=a.useState("completed"),[v,w]=a.useState([]),[Z,C]=a.useState(""),[E,h]=a.useState(null),[N,_]=a.useState(""),[H,B]=a.useState(""),le=a.useMemo(()=>{switch(t){case"income":return V;case"expense":return z;case"transfer":return X;default:return z}},[t]),se=a.useMemo(()=>xe(t,r,5),[t,r]),P=a.useMemo(()=>r==="KANRI"?[{value:"cash",label:"現金",code:"1101"},{value:"kanri_bank",label:"普通預金（管理）",code:"1102"}]:[{value:"shuzen_bank",label:"普通預金（修繕）",code:"1103"},{value:"kanri_bank",label:"普通預金（管理）から振替",code:"1102"}],[r]),de=()=>{const s=P.find(n=>n.value===U);return s?s.code:r==="KANRI"?"1102":"1103"};a.useEffect(()=>{r==="KANRI"&&U==="shuzen_bank"?k("kanri_bank"):r==="SHUZEN"&&U==="cash"&&k("shuzen_bank")},[r]);const Q=a.useMemo(()=>J.filter(s=>s.isActive),[]),ue=a.useMemo(()=>{if(!N)return[];const s=J.find(n=>n.id===N);return s?Q.filter(n=>n.id===N?!1:s.division==="KANRI"&&n.division==="SHUZEN"||s.division==="SHUZEN"&&n.division==="KANRI"||s.division===n.division):[]},[N,Q]),ne=a.useMemo(()=>!R||R.length<1?[]:ve(R,t,r),[R,t,r]),W=a.useCallback(s=>{y(s),x(s.label),G(!1),A(n=>({...n,accountCode:""}))},[]),te=()=>{Z.trim()&&!v.includes(Z.trim())&&(w([...v,Z.trim()]),C(""))},me=s=>{w(v.filter(n=>n!==s))},he=()=>{const s={};return t==="transfer"?(N||(s.transferFrom="振替元口座を選択してください"),H||(s.transferTo="振替先口座を選択してください")):p||(s.accountCode="勘定科目を選択してください"),(!j||parseFloat(j)<=0)&&(s.amount="金額を入力してください"),f||(s.date="日付を入力してください"),$.trim()||(s.description="摘要を入力してください"),A(s),Object.keys(s).length>0?(h({type:"error",message:"必須項目を入力してください"}),!1):(h({type:"success",message:"登録可能です"}),!0)},be=s=>s.startsWith("51")?"1301":s.startsWith("52")?"1302":s.startsWith("53")?"1303":"1301",fe=s=>{switch(s){case"1301":return"管理費未収金";case"1302":return"修繕積立金未収金";case"1303":return"使用料未収金";default:return"未収金"}},re=()=>{var s,n;if(t==="transfer"){if(!N||!H||!j)return null;const o=J.find(F=>F.id===N),l=J.find(F=>F.id===H);if(!o||!l)return null;const g=parseFloat(j)||0;return{date:f,description:$,division:r,tags:v.length>0?v:void 0,details:[{accountCode:l.code,accountName:l.name,debitAmount:g,creditAmount:0},{accountCode:o.code,accountName:o.name,debitAmount:0,creditAmount:g}]}}else{if(!p||!j)return null;const o=parseFloat(j)||0,l={date:f,description:$,division:r,serviceMonth:t!=="transfer"?`${I}-01`:void 0,payerId:t==="income"?D:void 0,tags:v.length>0?v:void 0,details:[]},g=de();if(t==="income")if(K==="pending"){const S=be(p.code),F=fe(S);l.details=[{accountCode:S,accountName:F,debitAmount:o,creditAmount:0},{accountCode:p.code,accountName:p.label,debitAmount:0,creditAmount:o,serviceMonth:`${I}-01`,payerId:D}]}else l.details=[{accountCode:g,accountName:(s=P.find(S=>S.code===g))==null?void 0:s.label,debitAmount:o,creditAmount:0},{accountCode:p.code,accountName:p.label,debitAmount:0,creditAmount:o,serviceMonth:`${I}-01`,payerId:D}];else t==="expense"&&(K==="pending"?l.details=[{accountCode:p.code,accountName:p.label,debitAmount:o,creditAmount:0,serviceMonth:`${I}-01`},{accountCode:"2101",accountName:"未払金",debitAmount:0,creditAmount:o}]:l.details=[{accountCode:p.code,accountName:p.label,debitAmount:o,creditAmount:0,serviceMonth:`${I}-01`},{accountCode:g,accountName:(n=P.find(S=>S.code===g))==null?void 0:n.label,debitAmount:0,creditAmount:o}]);return l}},pe=s=>{var o;if(s.preventDefault(),!he())return;const n=re();if(n){if(console.log("=== 仕訳データ (JSON) ==="),console.log(JSON.stringify(n,null,2)),console.log("========================="),n.tags=v.length>0?v:void 0,i)try{const l=i.createJournal({date:f,description:$,details:n.details,division:r});if(l.success)d&&d(),q(""),L(""),y(null),x(""),T(""),w([]),C(""),h({type:"success",message:"仕訳を登録しました"}),setTimeout(()=>{h(null)},3e3);else{const g=((o=l.errors)==null?void 0:o.join(", "))||"エラーが発生しました";h({type:"error",message:g})}}catch(l){h({type:"error",message:`エラー: ${l}`})}u&&u(n)}};return e.jsxs("div",{className:"freee-journal-form",children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h2",{children:"📝 かんたん仕訳入力"}),t!=="transfer"&&e.jsxs("div",{className:"division-toggle",children:[e.jsx("button",{className:`division-btn ${r==="KANRI"?"active":""}`,onClick:()=>{r!=="KANRI"&&(m("KANRI"),q(""),L(""),y(null),x(""),T(""),w([]),C(""),k("kanri_bank"),A({}),h({type:"info",message:"管理会計に切り替えました。入力がリセットされました。"}),setTimeout(()=>h(null),2e3))},children:"管理会計"}),e.jsx("button",{className:`division-btn ${r==="SHUZEN"?"active":""}`,onClick:()=>{r!=="SHUZEN"&&(m("SHUZEN"),q(""),L(""),y(null),x(""),T(""),w([]),C(""),k("shuzen_bank"),A({}),h({type:"info",message:"修繕会計に切り替えました。入力がリセットされました。"}),setTimeout(()=>h(null),2e3))},children:"修繕会計"}),e.jsx("button",{className:`division-btn ${r==="PARKING"?"active":""}`,onClick:()=>{r!=="PARKING"&&(m("PARKING"),q(""),L(""),y(null),x(""),T(""),w([]),C(""),k("kanri_bank"),A({}),h({type:"info",message:"駐車場会計に切り替えました。入力がリセットされました。"}),setTimeout(()=>h(null),2e3))},children:"駐車場会計"}),e.jsx("button",{className:`division-btn ${r==="OTHER"?"active":""}`,onClick:()=>{r!=="OTHER"&&(m("OTHER"),q(""),L(""),y(null),x(""),T(""),w([]),C(""),k("kanri_bank"),A({}),h({type:"info",message:"その他特別会計に切り替えました。入力がリセットされました。"}),setTimeout(()=>h(null),2e3))},children:"その他特別会計"})]})]}),e.jsxs("div",{className:"transaction-tabs",children:[e.jsxs("button",{className:`tab-btn ${t==="income"?"active income":""}`,onClick:()=>{b("income"),y(null),x(""),_(""),B("")},children:[e.jsx("span",{className:"tab-icon",children:"💰"}),"収入"]}),e.jsxs("button",{className:`tab-btn ${t==="expense"?"active expense":""}`,onClick:()=>{b("expense"),y(null),x(""),_(""),B("")},children:[e.jsx("span",{className:"tab-icon",children:"💸"}),"支出"]}),e.jsxs("button",{className:`tab-btn ${t==="transfer"?"active transfer":""}`,onClick:()=>{b("transfer"),y(null),x(""),_(""),B("")},children:[e.jsx("span",{className:"tab-icon",children:"🔄"}),"振替"]})]}),e.jsxs("form",{onSubmit:pe,className:"journal-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["取引日 ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"date",value:f,onChange:s=>O(s.target.value),className:c.date?"error":""}),c.date&&e.jsx("span",{className:"error-message",children:c.date})]}),t==="transfer"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["振替元口座 ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{value:N,onChange:s=>{_(s.target.value),B(""),A(n=>({...n,transferFrom:""}))},className:`form-select ${c.transferFrom?"error":""}`,children:[e.jsx("option",{value:"",children:"口座を選択してください"}),Q.map(s=>e.jsxs("option",{value:s.id,children:[s.name," ",s.bankName?`(${s.bankName})`:""]},s.id))]}),c.transferFrom&&e.jsx("span",{className:"error-message",children:c.transferFrom})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["振替先口座 ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{value:H,onChange:s=>{B(s.target.value),A(n=>({...n,transferTo:""}))},className:`form-select ${c.transferTo?"error":""}`,disabled:!N,children:[e.jsx("option",{value:"",children:N?"口座を選択してください":"まず振替元を選択してください"}),ue.map(s=>e.jsxs("option",{value:s.id,children:[s.name," ",s.bankName?`(${s.bankName})`:""]},s.id))]}),c.transferTo&&e.jsx("span",{className:"error-message",children:c.transferTo})]})]}):e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["勘定科目 ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{className:"account-search-wrapper",children:[e.jsx("input",{type:"text",value:R,onChange:s=>{x(s.target.value),G(!0)},onFocus:()=>G(!0),placeholder:`${t==="income"?"収入":"支出"}科目を検索...`,className:c.accountCode?"error":""}),e.jsx("button",{type:"button",className:"category-btn",onClick:()=>M(!0),title:"カテゴリーから選択",children:"📁"})]}),oe&&ne.length>0&&e.jsx("div",{className:"suggestions-dropdown",children:ne.slice(0,5).map(s=>e.jsxs("div",{className:"suggestion-item",onClick:()=>W(s),children:[e.jsx("span",{className:"suggestion-label",children:s.label}),e.jsx("span",{className:"suggestion-code",children:s.code})]},s.code))}),!R&&se.length>0&&e.jsxs("div",{className:"frequent-accounts",children:[e.jsxs("div",{className:"frequent-label",children:["よく使う項目（",r==="KANRI"?"管理会計":"修繕会計","）"]}),e.jsx("div",{className:"frequent-buttons",children:se.map(s=>{var n;return e.jsxs("button",{type:"button",className:"frequent-btn",onClick:()=>W(s),title:s.label,children:[s.shortLabel||s.label,((n=s.divisions)==null?void 0:n.includes("BOTH"))&&" ⚡"]},s.code)})})]}),c.accountCode&&e.jsx("span",{className:"error-message",children:c.accountCode})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["金額 ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{className:"amount-input",children:[e.jsx("span",{className:"currency",children:"¥"}),e.jsx("input",{type:"number",value:j,onChange:s=>q(s.target.value),placeholder:"0",min:"0",step:"1",className:c.amount?"error":""})]}),c.amount&&e.jsx("span",{className:"error-message",children:c.amount})]}),t!=="transfer"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"対象月"}),e.jsx("input",{type:"month",value:I,onChange:s=>ie(s.target.value)})]}),t==="income"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"支払者・部屋番号"}),e.jsx("input",{type:"text",value:D,onChange:s=>T(s.target.value),placeholder:"例: 101号室"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["摘要 ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",value:$,onChange:s=>L(s.target.value),placeholder:"取引の説明を入力",className:c.description?"error":""}),c.description&&e.jsx("span",{className:"error-message",children:c.description})]}),t!=="transfer"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"決済口座"}),e.jsx("select",{value:U,onChange:s=>k(s.target.value),className:"form-select",children:P.map(s=>e.jsxs("option",{value:s.value,children:[s.label," (",s.code,")"]},s.value))})]}),t!=="transfer"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"決済ステータス"}),e.jsxs("div",{className:"payment-status-toggle",children:[e.jsx("button",{type:"button",className:`status-btn ${K==="completed"?"active":""}`,onClick:()=>ee("completed"),children:"✅ 完了"}),e.jsx("button",{type:"button",className:`status-btn ${K==="pending"?"active":""}`,onClick:()=>ee("pending"),children:"⏳ 未決済"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"タグ"}),e.jsxs("div",{className:"tag-input-wrapper",children:[e.jsx("input",{type:"text",value:Z,onChange:s=>C(s.target.value),onKeyPress:s=>{s.key==="Enter"&&(s.preventDefault(),te())},placeholder:"タグを入力してEnterキー"}),e.jsx("button",{type:"button",onClick:te,className:"add-tag-btn",children:"追加"})]}),v.length>0&&e.jsx("div",{className:"tags-display",children:v.map(s=>e.jsxs("span",{className:"tag-chip",children:[s,e.jsx("button",{type:"button",onClick:()=>me(s),className:"tag-remove",children:"×"})]},s))})]}),(t==="transfer"&&N&&H&&j||t!=="transfer"&&p&&j)&&e.jsxs("div",{className:"journal-preview",children:[e.jsxs("h4",{children:["📋 仕訳プレビュー",K==="pending"&&t!=="transfer"&&e.jsx("span",{className:"preview-badge pending",children:"未決済"})]}),e.jsxs("table",{className:"preview-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"借方科目"}),e.jsx("th",{children:"借方金額"}),e.jsx("th",{children:"貸方科目"}),e.jsx("th",{children:"貸方金額"})]})}),e.jsx("tbody",{children:(ae=re())==null?void 0:ae.details.map((s,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:s.debitAmount>0?`${s.accountName||s.accountCode}`:"-"}),e.jsx("td",{className:"amount",children:s.debitAmount>0?`¥${s.debitAmount.toLocaleString()}`:"-"}),e.jsx("td",{children:s.creditAmount>0?`${s.accountName||s.accountCode}`:"-"}),e.jsx("td",{className:"amount",children:s.creditAmount>0?`¥${s.creditAmount.toLocaleString()}`:"-"})]},n))})]}),K==="pending"&&t!=="transfer"&&e.jsx("div",{className:"preview-note",children:e.jsx("small",{children:t==="income"?"※ 未決済のため、未収金を計上します":"※ 未決済のため、未払金を計上します"})})]}),E&&e.jsxs("div",{className:`validation-message ${E.type}`,children:[E.type==="success"&&"✅ ",E.type==="error"&&"❌ ",E.type==="info"&&"ℹ️ ",E.message]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"submit-btn",children:"仕訳を登録"})})]}),ce&&e.jsx("div",{className:"modal-backdrop",onClick:()=>M(!1),children:e.jsxs("div",{className:"account-modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"勘定科目を選択"}),e.jsx("button",{className:"close-btn",onClick:()=>M(!1),children:"✕"})]}),e.jsx("div",{className:"modal-content",children:le.map(s=>e.jsxs("div",{className:"category-section",children:[e.jsx("h4",{style:{color:s.color},children:s.label}),s.description&&e.jsx("p",{className:"category-desc",children:s.description}),e.jsx("div",{className:"account-grid",children:s.accounts.map(n=>{var l;const o=Y(n,r);return e.jsxs("button",{className:`account-btn ${o?"":"disabled"}`,onClick:()=>{o&&(W(n),M(!1))},disabled:!o,title:o?"":`この科目は${r==="KANRI"?"管理":"修繕"}会計では使用できません`,children:[e.jsx("span",{className:"account-label",children:n.shortLabel||n.label}),e.jsx("span",{className:"account-code",children:n.code}),((l=n.divisions)==null?void 0:l.includes("BOTH"))&&e.jsx("span",{className:"both-indicator",title:"両会計で使用可能",children:"⚡"})]},n.code)})})]},s.id))})]})})]})};export{ke as default};
