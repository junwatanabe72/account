import{j as e}from"./assets/index-DNcHv8Gn.js";import{r as a}from"./chunk-DJ1oPbzn.js";import{d as J}from"./chunk-xo-tfjFm.js";import"./chunk-B6LuprgX.js";const V=[{id:"fee-income",label:"ç®¡ç†è²»ãƒ»ç©ç«‹é‡‘åå…¥",description:"å®šæœŸçš„ãªåå…¥",color:"#10B981",accounts:[{code:"5101",label:"ç®¡ç†è²»åå…¥",shortLabel:"ç®¡ç†è²»",keywords:["ç®¡ç†è²»","æœˆé¡"],frequency:100,divisions:["KANRI"]},{code:"5201",label:"ä¿®ç¹•ç©ç«‹é‡‘åå…¥",shortLabel:"ä¿®ç¹•ç©ç«‹é‡‘",keywords:["ä¿®ç¹•","ç©ç«‹"],frequency:99,divisions:["SHUZEN"]}]},{id:"usage-income",label:"ä½¿ç”¨æ–™ãƒ»æ‰‹æ•°æ–™åå…¥",description:"æ–½è¨­åˆ©ç”¨ç­‰ã«ã‚ˆã‚‹åå…¥",color:"#06B6D4",accounts:[{code:"5102",label:"é§è»Šå ´ä½¿ç”¨æ–™åå…¥",shortLabel:"é§è»Šå ´",keywords:["é§è»Šå ´","ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°","æœˆæ¥µ"],frequency:90,divisions:["KANRI"]},{code:"5103",label:"é§è¼ªå ´ä½¿ç”¨æ–™åå…¥",shortLabel:"é§è¼ªå ´",keywords:["é§è¼ªå ´","è‡ªè»¢è»Š","ãƒã‚¤ã‚¯"],frequency:70,divisions:["KANRI"]},{code:"5104",label:"ãƒ«ãƒ¼ãƒ•ãƒãƒ«ã‚³ãƒ‹ãƒ¼ä½¿ç”¨æ–™åå…¥",shortLabel:"ãƒ«ãƒ¼ãƒ•ãƒãƒ«ã‚³ãƒ‹ãƒ¼",keywords:["ãƒ«ãƒ¼ãƒ•ãƒãƒ«ã‚³ãƒ‹ãƒ¼","å±‹ä¸Š","ãƒãƒ«ã‚³ãƒ‹ãƒ¼"],frequency:50,divisions:["KANRI"]},{code:"5105",label:"ãƒ†ãƒ©ã‚¹ä½¿ç”¨æ–™åå…¥",shortLabel:"ãƒ†ãƒ©ã‚¹",keywords:["ãƒ†ãƒ©ã‚¹","å°‚ç”¨åº­","åº­"],frequency:45,divisions:["KANRI"]},{code:"5106",label:"é›†ä¼šå®¤ä½¿ç”¨æ–™åå…¥",shortLabel:"é›†ä¼šå®¤",keywords:["é›†ä¼šå®¤","ãƒ›ãƒ¼ãƒ«","å…±ç”¨æ–½è¨­"],frequency:40,divisions:["KANRI"]},{code:"5303",label:"å»¶æ»é‡‘åå…¥",shortLabel:"å»¶æ»é‡‘",keywords:["é…å»¶","å»¶æ»","é…å»¶æå®³é‡‘"],frequency:10,divisions:["KANRI"]}]},{id:"other-income",label:"ãã®ä»–ã®åå…¥",description:"é›‘åå…¥ãªã©",color:"#8B5CF6",accounts:[{code:"5301",label:"å—å–åˆ©æ¯",shortLabel:"åˆ©æ¯",keywords:["åˆ©æ¯","é é‡‘åˆ©æ¯"],frequency:60,divisions:["BOTH"]},{code:"5302",label:"é›‘åå…¥",shortLabel:"é›‘åå…¥",keywords:["ãã®ä»–","é›‘","è‡ªè²©æ©Ÿ"],frequency:70,divisions:["BOTH"]},{code:"5304",label:"å—å–ä¿é™ºé‡‘",shortLabel:"ä¿é™ºé‡‘",keywords:["ä¿é™º","ä¿é™ºé‡‘"],frequency:20,divisions:["BOTH"]},{code:"5305",label:"è£œåŠ©é‡‘åå…¥",shortLabel:"è£œåŠ©é‡‘",keywords:["è£œåŠ©é‡‘","åŠ©æˆé‡‘"],frequency:15,divisions:["BOTH"]}]},{id:"special-income",label:"ç‰¹åˆ¥åå…¥",description:"è‡¨æ™‚çš„ãªåå…¥",color:"#F59E0B",accounts:[{code:"5401",label:"ç‰¹åˆ¥å¾´åé‡‘åå…¥",shortLabel:"ç‰¹åˆ¥å¾´åé‡‘",keywords:["ç‰¹åˆ¥","å¾´å"],frequency:5,divisions:["SHUZEN"]},{code:"5402",label:"ç¹°å…¥é‡‘åå…¥",shortLabel:"ç¹°å…¥é‡‘",keywords:["ç¹°å…¥","æŒ¯æ›¿"],frequency:10,divisions:["SHUZEN"]}]}],z=[{id:"utilities",label:"æ°´é“å…‰ç†±è²»",description:"é›»æ°—ãƒ»æ°´é“ãƒ»ã‚¬ã‚¹ãªã©",color:"#EF4444",accounts:[{code:"6102",label:"æ°´é“å…‰ç†±è²»",shortLabel:"æ°´é“å…‰ç†±è²»",keywords:["é›»æ°—","æ°´é“","ã‚¬ã‚¹","ç¯æ²¹","é›»åŠ›"],frequency:100,divisions:["KANRI"]}]},{id:"management-fee",label:"ç®¡ç†æ¥­å‹™è²»",description:"ç®¡ç†ä¼šç¤¾ã¸ã®æ”¯æ‰•ã„ãªã©",color:"#F59E0B",accounts:[{code:"6101",label:"ç®¡ç†å§”è¨—è²»",shortLabel:"ç®¡ç†å§”è¨—",keywords:["ç®¡ç†ä¼šç¤¾","å§”è¨—","æ¸…æƒ","è¨­å‚™ä¿å®ˆ","ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼","æ¶ˆé˜²"],frequency:95,divisions:["KANRI"]}]},{id:"repair-maintenance",label:"ä¿®ç¹•ãƒ»ä¿å…¨è²»",description:"å»ºç‰©ã‚„è¨­å‚™ã®ä¿®ç†ãƒ»æ”¹ä¿®",color:"#3B82F6",accounts:[{code:"6201",label:"ä¿®ç¹•è²»",shortLabel:"ä¿®ç¹•è²»",keywords:["ä¿®ç¹•","ä¿®ç†","è£œä¿®","ç·Šæ€¥","äºˆé˜²ä¿å…¨"],frequency:85,divisions:["KANRI"]},{code:"6401",label:"ä¿®ç¹•å·¥äº‹è²»",shortLabel:"å¤§è¦æ¨¡ä¿®ç¹•",keywords:["å¤§è¦æ¨¡","æ”¹ä¿®","å·¥äº‹","è¨ˆç”»ä¿®ç¹•"],frequency:30,divisions:["SHUZEN"]},{code:"6402",label:"è¨­è¨ˆç›£ç†è²»",shortLabel:"è¨­è¨ˆç›£ç†",keywords:["è¨­è¨ˆ","ç›£ç†","å»ºç¯‰å£«"],frequency:25,divisions:["SHUZEN"]}]},{id:"insurance-communication",label:"ä¿é™ºãƒ»é€šä¿¡è²»",description:"ä¿é™ºæ–™ã‚„é€šä¿¡é–¢é€£",color:"#059669",accounts:[{code:"6104",label:"ä¿é™ºæ–™",shortLabel:"ä¿é™º",keywords:["ä¿é™º","å…±ç”¨éƒ¨","ç«ç½","è³ å„Ÿ"],frequency:75,divisions:["BOTH"]},{code:"6103",label:"é€šä¿¡è²»",shortLabel:"é€šä¿¡",keywords:["éƒµé€","é›»è©±","ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ"],frequency:70,divisions:["KANRI"]}]},{id:"office-expense",label:"äº‹å‹™è²»ãƒ»ä¼šè­°è²»",description:"äº‹å‹™ç”¨å“ã‚„ä¼šè­°é–¢é€£",color:"#7C3AED",accounts:[{code:"6301",label:"æ¶ˆè€—å“è²»",shortLabel:"æ¶ˆè€—å“",keywords:["æ¶ˆè€—å“","äº‹å‹™ç”¨å“","æ–‡å…·"],frequency:80,divisions:["KANRI"]},{code:"6306",label:"å°åˆ·è²»",shortLabel:"å°åˆ·",keywords:["å°åˆ·","ã‚³ãƒ”ãƒ¼","è£½æœ¬"],frequency:60,divisions:["KANRI"]},{code:"6303",label:"ä¼šè­°è²»",shortLabel:"ä¼šè­°",keywords:["ä¼šè­°","ç†äº‹ä¼š","ç·ä¼š"],frequency:50,divisions:["KANRI"]},{code:"6309",label:"æ—…è²»äº¤é€šè²»",shortLabel:"äº¤é€šè²»",keywords:["äº¤é€š","æ—…è²»","å®Ÿè²»ç²¾ç®—"],frequency:55,divisions:["KANRI"]},{code:"6304",label:"å½¹å“¡æ‰‹å½“",shortLabel:"å½¹å“¡æ‰‹å½“",keywords:["å½¹å“¡","æ‰‹å½“","å ±é…¬"],frequency:45,divisions:["KANRI"]}]},{id:"professional-fee",label:"å°‚é–€å®¶å ±é…¬",description:"ç¨ç†å£«ãƒ»å¼è­·å£«ãªã©",color:"#DC2626",accounts:[{code:"6305",label:"å°‚é–€å®¶è¬é‡‘",shortLabel:"å°‚é–€å®¶è¬é‡‘",keywords:["é¡§å•","ç¨ç†å£«","å¼è­·å£«","å»ºç¯‰å£«","ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼"],frequency:65,divisions:["BOTH"]}]},{id:"other-expense",label:"ãã®ä»–ã®æ”¯å‡º",description:"ãã®ä»–ã®è²»ç”¨",color:"#6B7280",accounts:[{code:"6302",label:"æ”¯æ‰•æ‰‹æ•°æ–™",shortLabel:"æ‰‹æ•°æ–™",keywords:["æŒ¯è¾¼","æ‰‹æ•°æ–™","æ®‹é«˜è¨¼æ˜"],frequency:75,divisions:["BOTH"]},{code:"6307",label:"ç§Ÿç¨å…¬èª²",shortLabel:"ç§Ÿç¨å…¬èª²",keywords:["ç¨é‡‘","å°ç´™"],frequency:70,divisions:["KANRI"]},{code:"6308",label:"é›‘è²»",shortLabel:"é›‘è²»",keywords:["ãã®ä»–","é›‘"],frequency:65,divisions:["KANRI"]},{code:"6311",label:"è«¸ä¼šè²»",shortLabel:"è«¸ä¼šè²»",keywords:["è‡ªæ²»ä¼š","åŠ å…¥å›£ä½“"],frequency:40,divisions:["KANRI"]}]},{id:"special-expense",label:"ç‰¹åˆ¥æ”¯å‡º",description:"è‡¨æ™‚çš„ãªæ”¯å‡º",color:"#991B1B",accounts:[{code:"6501",label:"ç¹°å‡ºé‡‘",shortLabel:"ç¹°å‡ºé‡‘",keywords:["ç¹°å‡º","æŒ¯æ›¿","ä¿®ç¹•ä¼šè¨ˆ"],frequency:15,divisions:["KANRI"]},{code:"6502",label:"é›‘æå¤±",shortLabel:"é›‘æå¤±",keywords:["æå¤±","ç‰¹åˆ¥"],frequency:5,divisions:["BOTH"]}]}],X=[{id:"bank-transfer",label:"å£åº§é–“æŒ¯æ›¿",description:"éŠ€è¡Œå£åº§é–“ã®è³‡é‡‘ç§»å‹•",color:"#10B981",accounts:[{code:"1102",label:"æ™®é€šé é‡‘ï¼ˆç®¡ç†ï¼‰",shortLabel:"ç®¡ç†å£åº§",keywords:["ç®¡ç†","æ™®é€šé é‡‘"],frequency:90},{code:"1103",label:"æ™®é€šé é‡‘ï¼ˆä¿®ç¹•ï¼‰",shortLabel:"ä¿®ç¹•å£åº§",keywords:["ä¿®ç¹•","æ™®é€šé é‡‘"],frequency:85},{code:"1104",label:"å®šæœŸé é‡‘",shortLabel:"å®šæœŸé é‡‘",keywords:["å®šæœŸ"],frequency:50},{code:"1101",label:"ç¾é‡‘",shortLabel:"ç¾é‡‘",keywords:["ç¾é‡‘","å°å£"],frequency:30}]}];function ve(i,d,u){const t=d==="income"?V:d==="expense"?z:X,b=[],r=i.toLowerCase();return t.forEach(m=>{m.accounts.forEach(f=>{if(u&&!Y(f,u))return;const O=Ne(f,r);O>0&&b.push({...f,frequency:O})})}),b.sort((m,f)=>(f.frequency||0)-(m.frequency||0))}function Ne(i,d){var t,b;let u=0;return i.code===d?1e3:(i.label.toLowerCase().includes(d)&&(u+=100),(t=i.shortLabel)!=null&&t.toLowerCase().includes(d)&&(u+=80),(b=i.keywords)==null||b.forEach(r=>{r.toLowerCase().includes(d)&&(u+=50)}),u>0&&(u+=(i.frequency||0)/10),u)}function xe(i,d,u=5){const t=i==="income"?V:i==="expense"?z:X,b=[];return t.forEach(m=>{b.push(...m.accounts)}),(d?b.filter(m=>Y(m,d)):b).sort((m,f)=>(f.frequency||0)-(m.frequency||0)).slice(0,u)}function Y(i,d){return i.divisions?i.divisions.includes(d)||i.divisions.includes("BOTH"):!0}const ke=({engine:i,onChange:d,onSubmit:u})=>{var ae;const[t,b]=a.useState("expense"),[r,m]=a.useState("KANRI"),[f,O]=a.useState(new Date().toISOString().split("T")[0]),[j,q]=a.useState(""),[$,L]=a.useState(""),[p,y]=a.useState(null),[R,x]=a.useState(""),[oe,G]=a.useState(!1),[ce,M]=a.useState(!1),[I,ie]=a.useState(new Date().toISOString().slice(0,7)),[D,T]=a.useState(""),[c,A]=a.useState({}),[U,k]=a.useState("kanri_bank"),[K,ee]=a.useState("completed"),[v,w]=a.useState([]),[Z,C]=a.useState(""),[E,h]=a.useState(null),[N,_]=a.useState(""),[H,B]=a.useState(""),le=a.useMemo(()=>{switch(t){case"income":return V;case"expense":return z;case"transfer":return X;default:return z}},[t]),se=a.useMemo(()=>xe(t,r,5),[t,r]),P=a.useMemo(()=>r==="KANRI"?[{value:"cash",label:"ç¾é‡‘",code:"1101"},{value:"kanri_bank",label:"æ™®é€šé é‡‘ï¼ˆç®¡ç†ï¼‰",code:"1102"}]:[{value:"shuzen_bank",label:"æ™®é€šé é‡‘ï¼ˆä¿®ç¹•ï¼‰",code:"1103"},{value:"kanri_bank",label:"æ™®é€šé é‡‘ï¼ˆç®¡ç†ï¼‰ã‹ã‚‰æŒ¯æ›¿",code:"1102"}],[r]),de=()=>{const s=P.find(n=>n.value===U);return s?s.code:r==="KANRI"?"1102":"1103"};a.useEffect(()=>{r==="KANRI"&&U==="shuzen_bank"?k("kanri_bank"):r==="SHUZEN"&&U==="cash"&&k("shuzen_bank")},[r]);const Q=a.useMemo(()=>J.filter(s=>s.isActive),[]),ue=a.useMemo(()=>{if(!N)return[];const s=J.find(n=>n.id===N);return s?Q.filter(n=>n.id===N?!1:s.division==="KANRI"&&n.division==="SHUZEN"||s.division==="SHUZEN"&&n.division==="KANRI"||s.division===n.division):[]},[N,Q]),ne=a.useMemo(()=>!R||R.length<1?[]:ve(R,t,r),[R,t,r]),W=a.useCallback(s=>{y(s),x(s.label),G(!1),A(n=>({...n,accountCode:""}))},[]),te=()=>{Z.trim()&&!v.includes(Z.trim())&&(w([...v,Z.trim()]),C(""))},me=s=>{w(v.filter(n=>n!==s))},he=()=>{const s={};return t==="transfer"?(N||(s.transferFrom="æŒ¯æ›¿å…ƒå£åº§ã‚’é¸æŠã—ã¦ãã ã•ã„"),H||(s.transferTo="æŒ¯æ›¿å…ˆå£åº§ã‚’é¸æŠã—ã¦ãã ã•ã„")):p||(s.accountCode="å‹˜å®šç§‘ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„"),(!j||parseFloat(j)<=0)&&(s.amount="é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"),f||(s.date="æ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"),$.trim()||(s.description="æ‘˜è¦ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"),A(s),Object.keys(s).length>0?(h({type:"error",message:"å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"}),!1):(h({type:"success",message:"ç™»éŒ²å¯èƒ½ã§ã™"}),!0)},be=s=>s.startsWith("51")?"1301":s.startsWith("52")?"1302":s.startsWith("53")?"1303":"1301",fe=s=>{switch(s){case"1301":return"ç®¡ç†è²»æœªåé‡‘";case"1302":return"ä¿®ç¹•ç©ç«‹é‡‘æœªåé‡‘";case"1303":return"ä½¿ç”¨æ–™æœªåé‡‘";default:return"æœªåé‡‘"}},re=()=>{var s,n;if(t==="transfer"){if(!N||!H||!j)return null;const o=J.find(F=>F.id===N),l=J.find(F=>F.id===H);if(!o||!l)return null;const g=parseFloat(j)||0;return{date:f,description:$,division:r,tags:v.length>0?v:void 0,details:[{accountCode:l.code,accountName:l.name,debitAmount:g,creditAmount:0},{accountCode:o.code,accountName:o.name,debitAmount:0,creditAmount:g}]}}else{if(!p||!j)return null;const o=parseFloat(j)||0,l={date:f,description:$,division:r,serviceMonth:t!=="transfer"?`${I}-01`:void 0,payerId:t==="income"?D:void 0,tags:v.length>0?v:void 0,details:[]},g=de();if(t==="income")if(K==="pending"){const S=be(p.code),F=fe(S);l.details=[{accountCode:S,accountName:F,debitAmount:o,creditAmount:0},{accountCode:p.code,accountName:p.label,debitAmount:0,creditAmount:o,serviceMonth:`${I}-01`,payerId:D}]}else l.details=[{accountCode:g,accountName:(s=P.find(S=>S.code===g))==null?void 0:s.label,debitAmount:o,creditAmount:0},{accountCode:p.code,accountName:p.label,debitAmount:0,creditAmount:o,serviceMonth:`${I}-01`,payerId:D}];else t==="expense"&&(K==="pending"?l.details=[{accountCode:p.code,accountName:p.label,debitAmount:o,creditAmount:0,serviceMonth:`${I}-01`},{accountCode:"2101",accountName:"æœªæ‰•é‡‘",debitAmount:0,creditAmount:o}]:l.details=[{accountCode:p.code,accountName:p.label,debitAmount:o,creditAmount:0,serviceMonth:`${I}-01`},{accountCode:g,accountName:(n=P.find(S=>S.code===g))==null?void 0:n.label,debitAmount:0,creditAmount:o}]);return l}},pe=s=>{var o;if(s.preventDefault(),!he())return;const n=re();if(n){if(console.log("=== ä»•è¨³ãƒ‡ãƒ¼ã‚¿ (JSON) ==="),console.log(JSON.stringify(n,null,2)),console.log("========================="),n.tags=v.length>0?v:void 0,i)try{const l=i.createJournal({date:f,description:$,details:n.details,division:r});if(l.success)d&&d(),q(""),L(""),y(null),x(""),T(""),w([]),C(""),h({type:"success",message:"ä»•è¨³ã‚’ç™»éŒ²ã—ã¾ã—ãŸ"}),setTimeout(()=>{h(null)},3e3);else{const g=((o=l.errors)==null?void 0:o.join(", "))||"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ";h({type:"error",message:g})}}catch(l){h({type:"error",message:`ã‚¨ãƒ©ãƒ¼: ${l}`})}u&&u(n)}};return e.jsxs("div",{className:"freee-journal-form",children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h2",{children:"ğŸ“ ã‹ã‚“ãŸã‚“ä»•è¨³å…¥åŠ›"}),t!=="transfer"&&e.jsxs("div",{className:"division-toggle",children:[e.jsx("button",{className:`division-btn ${r==="KANRI"?"active":""}`,onClick:()=>{r!=="KANRI"&&(m("KANRI"),q(""),L(""),y(null),x(""),T(""),w([]),C(""),k("kanri_bank"),A({}),h({type:"info",message:"ç®¡ç†ä¼šè¨ˆã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸã€‚å…¥åŠ›ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã—ãŸã€‚"}),setTimeout(()=>h(null),2e3))},children:"ç®¡ç†ä¼šè¨ˆ"}),e.jsx("button",{className:`division-btn ${r==="SHUZEN"?"active":""}`,onClick:()=>{r!=="SHUZEN"&&(m("SHUZEN"),q(""),L(""),y(null),x(""),T(""),w([]),C(""),k("shuzen_bank"),A({}),h({type:"info",message:"ä¿®ç¹•ä¼šè¨ˆã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸã€‚å…¥åŠ›ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã—ãŸã€‚"}),setTimeout(()=>h(null),2e3))},children:"ä¿®ç¹•ä¼šè¨ˆ"}),e.jsx("button",{className:`division-btn ${r==="PARKING"?"active":""}`,onClick:()=>{r!=="PARKING"&&(m("PARKING"),q(""),L(""),y(null),x(""),T(""),w([]),C(""),k("kanri_bank"),A({}),h({type:"info",message:"é§è»Šå ´ä¼šè¨ˆã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸã€‚å…¥åŠ›ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã—ãŸã€‚"}),setTimeout(()=>h(null),2e3))},children:"é§è»Šå ´ä¼šè¨ˆ"}),e.jsx("button",{className:`division-btn ${r==="OTHER"?"active":""}`,onClick:()=>{r!=="OTHER"&&(m("OTHER"),q(""),L(""),y(null),x(""),T(""),w([]),C(""),k("kanri_bank"),A({}),h({type:"info",message:"ãã®ä»–ç‰¹åˆ¥ä¼šè¨ˆã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸã€‚å…¥åŠ›ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã—ãŸã€‚"}),setTimeout(()=>h(null),2e3))},children:"ãã®ä»–ç‰¹åˆ¥ä¼šè¨ˆ"})]})]}),e.jsxs("div",{className:"transaction-tabs",children:[e.jsxs("button",{className:`tab-btn ${t==="income"?"active income":""}`,onClick:()=>{b("income"),y(null),x(""),_(""),B("")},children:[e.jsx("span",{className:"tab-icon",children:"ğŸ’°"}),"åå…¥"]}),e.jsxs("button",{className:`tab-btn ${t==="expense"?"active expense":""}`,onClick:()=>{b("expense"),y(null),x(""),_(""),B("")},children:[e.jsx("span",{className:"tab-icon",children:"ğŸ’¸"}),"æ”¯å‡º"]}),e.jsxs("button",{className:`tab-btn ${t==="transfer"?"active transfer":""}`,onClick:()=>{b("transfer"),y(null),x(""),_(""),B("")},children:[e.jsx("span",{className:"tab-icon",children:"ğŸ”„"}),"æŒ¯æ›¿"]})]}),e.jsxs("form",{onSubmit:pe,className:"journal-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["å–å¼•æ—¥ ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"date",value:f,onChange:s=>O(s.target.value),className:c.date?"error":""}),c.date&&e.jsx("span",{className:"error-message",children:c.date})]}),t==="transfer"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["æŒ¯æ›¿å…ƒå£åº§ ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{value:N,onChange:s=>{_(s.target.value),B(""),A(n=>({...n,transferFrom:""}))},className:`form-select ${c.transferFrom?"error":""}`,children:[e.jsx("option",{value:"",children:"å£åº§ã‚’é¸æŠã—ã¦ãã ã•ã„"}),Q.map(s=>e.jsxs("option",{value:s.id,children:[s.name," ",s.bankName?`(${s.bankName})`:""]},s.id))]}),c.transferFrom&&e.jsx("span",{className:"error-message",children:c.transferFrom})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["æŒ¯æ›¿å…ˆå£åº§ ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{value:H,onChange:s=>{B(s.target.value),A(n=>({...n,transferTo:""}))},className:`form-select ${c.transferTo?"error":""}`,disabled:!N,children:[e.jsx("option",{value:"",children:N?"å£åº§ã‚’é¸æŠã—ã¦ãã ã•ã„":"ã¾ãšæŒ¯æ›¿å…ƒã‚’é¸æŠã—ã¦ãã ã•ã„"}),ue.map(s=>e.jsxs("option",{value:s.id,children:[s.name," ",s.bankName?`(${s.bankName})`:""]},s.id))]}),c.transferTo&&e.jsx("span",{className:"error-message",children:c.transferTo})]})]}):e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["å‹˜å®šç§‘ç›® ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{className:"account-search-wrapper",children:[e.jsx("input",{type:"text",value:R,onChange:s=>{x(s.target.value),G(!0)},onFocus:()=>G(!0),placeholder:`${t==="income"?"åå…¥":"æ”¯å‡º"}ç§‘ç›®ã‚’æ¤œç´¢...`,className:c.accountCode?"error":""}),e.jsx("button",{type:"button",className:"category-btn",onClick:()=>M(!0),title:"ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‹ã‚‰é¸æŠ",children:"ğŸ“"})]}),oe&&ne.length>0&&e.jsx("div",{className:"suggestions-dropdown",children:ne.slice(0,5).map(s=>e.jsxs("div",{className:"suggestion-item",onClick:()=>W(s),children:[e.jsx("span",{className:"suggestion-label",children:s.label}),e.jsx("span",{className:"suggestion-code",children:s.code})]},s.code))}),!R&&se.length>0&&e.jsxs("div",{className:"frequent-accounts",children:[e.jsxs("div",{className:"frequent-label",children:["ã‚ˆãä½¿ã†é …ç›®ï¼ˆ",r==="KANRI"?"ç®¡ç†ä¼šè¨ˆ":"ä¿®ç¹•ä¼šè¨ˆ","ï¼‰"]}),e.jsx("div",{className:"frequent-buttons",children:se.map(s=>{var n;return e.jsxs("button",{type:"button",className:"frequent-btn",onClick:()=>W(s),title:s.label,children:[s.shortLabel||s.label,((n=s.divisions)==null?void 0:n.includes("BOTH"))&&" âš¡"]},s.code)})})]}),c.accountCode&&e.jsx("span",{className:"error-message",children:c.accountCode})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["é‡‘é¡ ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{className:"amount-input",children:[e.jsx("span",{className:"currency",children:"Â¥"}),e.jsx("input",{type:"number",value:j,onChange:s=>q(s.target.value),placeholder:"0",min:"0",step:"1",className:c.amount?"error":""})]}),c.amount&&e.jsx("span",{className:"error-message",children:c.amount})]}),t!=="transfer"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"å¯¾è±¡æœˆ"}),e.jsx("input",{type:"month",value:I,onChange:s=>ie(s.target.value)})]}),t==="income"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"æ”¯æ‰•è€…ãƒ»éƒ¨å±‹ç•ªå·"}),e.jsx("input",{type:"text",value:D,onChange:s=>T(s.target.value),placeholder:"ä¾‹: 101å·å®¤"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["æ‘˜è¦ ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",value:$,onChange:s=>L(s.target.value),placeholder:"å–å¼•ã®èª¬æ˜ã‚’å…¥åŠ›",className:c.description?"error":""}),c.description&&e.jsx("span",{className:"error-message",children:c.description})]}),t!=="transfer"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"æ±ºæ¸ˆå£åº§"}),e.jsx("select",{value:U,onChange:s=>k(s.target.value),className:"form-select",children:P.map(s=>e.jsxs("option",{value:s.value,children:[s.label," (",s.code,")"]},s.value))})]}),t!=="transfer"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"æ±ºæ¸ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹"}),e.jsxs("div",{className:"payment-status-toggle",children:[e.jsx("button",{type:"button",className:`status-btn ${K==="completed"?"active":""}`,onClick:()=>ee("completed"),children:"âœ… å®Œäº†"}),e.jsx("button",{type:"button",className:`status-btn ${K==="pending"?"active":""}`,onClick:()=>ee("pending"),children:"â³ æœªæ±ºæ¸ˆ"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ã‚¿ã‚°"}),e.jsxs("div",{className:"tag-input-wrapper",children:[e.jsx("input",{type:"text",value:Z,onChange:s=>C(s.target.value),onKeyPress:s=>{s.key==="Enter"&&(s.preventDefault(),te())},placeholder:"ã‚¿ã‚°ã‚’å…¥åŠ›ã—ã¦Enterã‚­ãƒ¼"}),e.jsx("button",{type:"button",onClick:te,className:"add-tag-btn",children:"è¿½åŠ "})]}),v.length>0&&e.jsx("div",{className:"tags-display",children:v.map(s=>e.jsxs("span",{className:"tag-chip",children:[s,e.jsx("button",{type:"button",onClick:()=>me(s),className:"tag-remove",children:"Ã—"})]},s))})]}),(t==="transfer"&&N&&H&&j||t!=="transfer"&&p&&j)&&e.jsxs("div",{className:"journal-preview",children:[e.jsxs("h4",{children:["ğŸ“‹ ä»•è¨³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼",K==="pending"&&t!=="transfer"&&e.jsx("span",{className:"preview-badge pending",children:"æœªæ±ºæ¸ˆ"})]}),e.jsxs("table",{className:"preview-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"å€Ÿæ–¹ç§‘ç›®"}),e.jsx("th",{children:"å€Ÿæ–¹é‡‘é¡"}),e.jsx("th",{children:"è²¸æ–¹ç§‘ç›®"}),e.jsx("th",{children:"è²¸æ–¹é‡‘é¡"})]})}),e.jsx("tbody",{children:(ae=re())==null?void 0:ae.details.map((s,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:s.debitAmount>0?`${s.accountName||s.accountCode}`:"-"}),e.jsx("td",{className:"amount",children:s.debitAmount>0?`Â¥${s.debitAmount.toLocaleString()}`:"-"}),e.jsx("td",{children:s.creditAmount>0?`${s.accountName||s.accountCode}`:"-"}),e.jsx("td",{className:"amount",children:s.creditAmount>0?`Â¥${s.creditAmount.toLocaleString()}`:"-"})]},n))})]}),K==="pending"&&t!=="transfer"&&e.jsx("div",{className:"preview-note",children:e.jsx("small",{children:t==="income"?"â€» æœªæ±ºæ¸ˆã®ãŸã‚ã€æœªåé‡‘ã‚’è¨ˆä¸Šã—ã¾ã™":"â€» æœªæ±ºæ¸ˆã®ãŸã‚ã€æœªæ‰•é‡‘ã‚’è¨ˆä¸Šã—ã¾ã™"})})]}),E&&e.jsxs("div",{className:`validation-message ${E.type}`,children:[E.type==="success"&&"âœ… ",E.type==="error"&&"âŒ ",E.type==="info"&&"â„¹ï¸ ",E.message]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"submit-btn",children:"ä»•è¨³ã‚’ç™»éŒ²"})})]}),ce&&e.jsx("div",{className:"modal-backdrop",onClick:()=>M(!1),children:e.jsxs("div",{className:"account-modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"å‹˜å®šç§‘ç›®ã‚’é¸æŠ"}),e.jsx("button",{className:"close-btn",onClick:()=>M(!1),children:"âœ•"})]}),e.jsx("div",{className:"modal-content",children:le.map(s=>e.jsxs("div",{className:"category-section",children:[e.jsx("h4",{style:{color:s.color},children:s.label}),s.description&&e.jsx("p",{className:"category-desc",children:s.description}),e.jsx("div",{className:"account-grid",children:s.accounts.map(n=>{var l;const o=Y(n,r);return e.jsxs("button",{className:`account-btn ${o?"":"disabled"}`,onClick:()=>{o&&(W(n),M(!1))},disabled:!o,title:o?"":`ã“ã®ç§‘ç›®ã¯${r==="KANRI"?"ç®¡ç†":"ä¿®ç¹•"}ä¼šè¨ˆã§ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“`,children:[e.jsx("span",{className:"account-label",children:n.shortLabel||n.label}),e.jsx("span",{className:"account-code",children:n.code}),((l=n.divisions)==null?void 0:l.includes("BOTH"))&&e.jsx("span",{className:"both-indicator",title:"ä¸¡ä¼šè¨ˆã§ä½¿ç”¨å¯èƒ½",children:"âš¡"})]},n.code)})})]},s.id))})]})})]})};export{ke as default};
