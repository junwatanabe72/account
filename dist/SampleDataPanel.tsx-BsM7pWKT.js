import{u as y,j as s}from"./assets/index-DNcHv8Gn.js";import"./chunk-DJ1oPbzn.js";import"./chunk-B6LuprgX.js";function S(t,m){const i=String(m).padStart(2,"0");return`${t}${i}`}const Y=({engine:t,onChange:m})=>{const i=y(),f=e=>{const r=Math.min(10,Math.ceil(e/50))||1,l=Math.ceil(e/r),a=new Map;let d=0;for(let p=1;p<=r;p++)for(let o=1;o<=l&&d<e;o++){const n=S(p,o),A=55+d%10*3,c=e<=50?25e3:e<=200?22e3:2e4,u=e<=50?15e3:e<=200?13e3:12e3;a.set(n,{unitNumber:n,ownerName:`入居者${String(d+1).padStart(3,"0")}`,floor:p,area:A,managementFee:c,repairReserve:u,contact:"",bankAccount:"",isActive:!0}),d++}t.unitOwners=Array.from(a.values()),t.rebuildAuxiliaryAccounts(),m(),i.show(`${e}戸のサンプル組合員を作成しました`,"success")},x=e=>{f(e),setTimeout(()=>{let r=0,l=0,a=0;if(t.unitOwners.forEach(n=>{n.isActive&&(a++,r+=Number(n.managementFee)||0,l+=Number(n.repairReserve)||0)}),a===0||r+l===0){i.show("月次請求の作成に失敗しました: 有効な組合員または月額がありません","danger");return}const d=(()=>{const n=new Date;return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-01`})(),o=t.createMonthlyBilling(d);if(o.success)m(),i.show("月次請求仕訳を作成しました","success");else{const n=o.errors&&o.errors.join(", ")||"原因不明のエラー";i.show(`月次請求の作成に失敗しました: ${n}`,"danger")}},0)},j=()=>{confirm("完全な年間サンプルデータを作成します。既存のデータはすべて削除されます。よろしいですか？")&&(t.services.sampleDataService.loadFullYearSampleData(),m(),i.show("1年分の完全なサンプルデータを生成しました（管理費・修繕・駐車場・その他の4区分）","success"))};return s.jsxs("div",{className:"card mt-3",children:[s.jsx("div",{className:"card-header",children:s.jsx("strong",{children:"サンプルデータ生成"})}),s.jsxs("div",{className:"card-body d-flex flex-wrap gap-2",children:[s.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>f(50),children:"50戸（組合員のみ）"}),s.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>f(200),children:"200戸（組合員のみ）"}),s.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>f(500),children:"500戸（組合員のみ）"}),s.jsx("span",{className:"vr"}),s.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>x(50),children:"50戸＋月次請求"}),s.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>x(200),children:"200戸＋月次請求"}),s.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>x(500),children:"500戸＋月次請求"})]}),s.jsxs("div",{className:"card-body pt-0 d-flex flex-wrap gap-2",children:[s.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>R(),children:"50戸・年間サンプル（期首〜12ヶ月・期末）"}),s.jsx("button",{className:"btn btn-success",onClick:j,children:"🏢 完全な年間サンプル（4区分・実務データ）"})]}),s.jsx("div",{className:"card-footer",children:s.jsxs("small",{className:"text-muted",children:[s.jsx("strong",{children:"完全な年間サンプル："}),"2024年4月〜2025年3月の1年分の実務的なデータを生成します。 管理費、修繕積立金、駐車場、その他の4区分すべてのデータが含まれます。"]})})]});function b(e,r,l){const a=String(r).padStart(2,"0"),d=String(l).padStart(2,"0");return`${e}-${a}-${d}`}function v(e,r,l){const a=new Date(e,r-1+l,1);return{y:a.getFullYear(),m:a.getMonth()+1}}function R(){if(!confirm("50戸・年間サンプルを作成します（期首残高、12ヶ月の請求・入金・費用、期末振替を自動生成）。既存データはクリアされます。実行しますか？"))return;const e=new Date,r=e.getMonth()+1>=4?e.getFullYear():e.getFullYear()-1,l=r+1;t.clearAll(),f(50);const a={date:b(r,4,1),entries:[{accountCode:"1112",debitAmount:5e6},{accountCode:"1113",debitAmount:8e6},{accountCode:"3111",creditAmount:13e6}]};if(!t.createOpeningBalance(a.date,a.entries).success){i.show("期首残高の作成に失敗しました","danger");return}let o=0,n=0;t.unitOwners.forEach(c=>{c.isActive&&(o+=Number(c.managementFee)||0,n+=Number(c.repairReserve)||0)});for(let c=0;c<12;c++){const{y:u,m:h}=v(r,4,c),g=b(u,h,1),N=b(u,h,5),w=b(u,h,10),C=b(u,h,20);if(!t.createMonthlyBilling(g).success){i.show(`月次請求失敗: ${u}/${h}`,"danger");return}o>0&&t.createJournal({date:N,description:"管理費入金（口座振替）",details:[{accountCode:"1112",debitAmount:o},{accountCode:"1121",creditAmount:o}]}),n>0&&t.createJournal({date:N,description:"修繕積立金入金（口座振替）",details:[{accountCode:"1113",debitAmount:n},{accountCode:"1122",creditAmount:n}]}),t.createJournal({date:w,description:"管理会社委託費支払い",details:[{accountCode:"5111",debitAmount:5e5},{accountCode:"1112",creditAmount:5e5}]}),t.createJournal({date:w,description:"清掃費支払い",details:[{accountCode:"5121",debitAmount:15e4},{accountCode:"1112",creditAmount:15e4}]}),t.createJournal({date:C,description:"エレベーター保守費支払い",details:[{accountCode:"5123",debitAmount:8e4},{accountCode:"1112",creditAmount:8e4}]}),t.createJournal({date:C,description:"共用部電気代支払い",details:[{accountCode:"5124",debitAmount:45e3},{accountCode:"1112",creditAmount:45e3}]}),(c===5||c===10)&&t.createJournal({date:C,description:"大規模修繕工事費支払い",details:[{accountCode:"5211",debitAmount:8e5},{accountCode:"1113",creditAmount:8e5}]})}const A=b(l,3,31);t.createClosingEntries(A),m(),i.show("50戸・年間サンプルを作成しました","success")}};export{Y as SampleDataPanel};
