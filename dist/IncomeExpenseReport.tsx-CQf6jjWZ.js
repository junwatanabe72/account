import{j as e}from"./assets/index-DNcHv8Gn.js";import{r as S}from"./chunk-DJ1oPbzn.js";import{g as R,D as E}from"./chunk-nbQFM0MW.js";import"./chunk-B6LuprgX.js";const w=({value:a,onChange:h})=>e.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[e.jsx("label",{className:"form-label mb-0",children:"年度"}),e.jsxs("select",{className:"form-select",style:{maxWidth:180},value:a,onChange:b=>h(b.target.value),children:[e.jsx("option",{value:"2023",children:"2023年度"}),e.jsx("option",{value:"2024",children:"2024年度"}),e.jsx("option",{value:"2025",children:"2025年度"})]})]});function l(a){return"¥"+a.toLocaleString()}const B=({engine:a})=>{const[h,b]=S.useState("2024"),[p,N]=S.useState("ALL");R(E);const A=d=>{const n=parseInt(h),x=`${n}-04-01`,o=`${n+1}-03-31`,m=a.getIncomeDetailSummary(x,o,d).map(r=>({code:r.accountCode,name:r.accountName,amount:r.amount})),j=m.reduce((r,i)=>r+i.amount,0),f=a.getExpenseDetailSummary(x,o,d).map(r=>({code:r.accountCode,name:r.accountName,amount:r.amount})),s=f.reduce((r,i)=>r+i.amount,0);return{revenues:m,expenses:f,totalRevenues:j,totalExpenses:s}},v=A("KANRI"),u=A("SHUZEN"),y=A("PARKING"),z=d=>{let n="4101";switch(d){case"KANRI":n="4101";break;case"SHUZEN":n="4102";break;case"PARKING":n="4103";break;case"OTHER":n="4104";break}const x=a.accounts.find(o=>o.code===n);return x?x.getDisplayBalance():0},g=(d,n,x)=>{if(!n)return e.jsx("div",{className:"text-muted",children:"データがありません"});const o=x?z(x):0,c=(n.totalRevenues||0)-(n.totalExpenses||0),m=o+c,j={width:"100%",borderCollapse:"collapse",border:"1px solid #ddd",fontSize:"14px"},t={border:"1px solid #ddd",padding:"8px"},f={overflowX:"auto",WebkitOverflowScrolling:"touch"};return e.jsxs("div",{style:{border:"2px solid #007bff",borderRadius:8,padding:"20px",marginBottom:20},children:[e.jsxs("h3",{style:{textAlign:"center",marginBottom:20,color:"#007bff",fontSize:"clamp(1.2rem, 3vw, 1.75rem)"},children:["第",parseInt(h)-2e3,"期 収支報告書（",h,"年4月〜",parseInt(h)+1,"年3月）"]}),e.jsx("h4",{style:{textAlign:"center",marginBottom:30,color:"#666",fontSize:"clamp(1rem, 2.5vw, 1.5rem)"},children:d}),e.jsxs("div",{className:"d-none d-lg-flex",style:{gap:40,marginBottom:30},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("h5",{style:{backgroundColor:"#e3f2fd",padding:10,margin:0,textAlign:"center",fontWeight:"bold"},children:"収入の部"}),e.jsxs("table",{style:j,children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[e.jsx("th",{style:{...t,textAlign:"left"},children:"科目"}),e.jsx("th",{style:{...t,textAlign:"center"},children:"予算（円）"}),e.jsx("th",{style:{...t,textAlign:"center"},children:"決算（円）"}),e.jsx("th",{style:{...t,textAlign:"center"},children:"差額（円）"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:t,children:"前期繰越金"}),e.jsx("td",{style:{...t,textAlign:"right"},children:l(o)}),e.jsx("td",{style:{...t,textAlign:"right"},children:l(o)}),e.jsx("td",{style:{...t,textAlign:"right"},children:"0"})]}),n.revenues.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,style:{...t,textAlign:"center",color:"#888"},children:"その他収入データなし"})}):n.revenues.map(s=>e.jsxs("tr",{children:[e.jsx("td",{style:t,children:s.name}),e.jsx("td",{style:{...t,textAlign:"right"},children:l(s.amount)}),e.jsx("td",{style:{...t,textAlign:"right"},children:l(s.amount)}),e.jsx("td",{style:{...t,textAlign:"right"},children:"0"})]},s.code)),e.jsxs("tr",{style:{backgroundColor:"#e8f5e8",fontWeight:"bold"},children:[e.jsx("td",{style:t,children:"収入 合計"}),e.jsx("td",{style:{...t,textAlign:"right"},children:l(o+n.totalRevenues)}),e.jsx("td",{style:{...t,textAlign:"right"},children:l(o+n.totalRevenues)}),e.jsx("td",{style:{...t,textAlign:"right"},children:"0"})]})]})]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h5",{style:{backgroundColor:"#ffebee",padding:10,margin:0,textAlign:"center",fontWeight:"bold"},children:"支出の部"}),e.jsxs("table",{style:j,children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[e.jsx("th",{style:{...t,textAlign:"left"},children:"科目"}),e.jsx("th",{style:{...t,textAlign:"center"},children:"予算（円）"}),e.jsx("th",{style:{...t,textAlign:"center"},children:"決算（円）"}),e.jsx("th",{style:{...t,textAlign:"center"},children:"差額（円）"})]})}),e.jsxs("tbody",{children:[n.expenses.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,style:{...t,textAlign:"center",color:"#888"},children:"支出データなし"})}):n.expenses.map(s=>{const r=Math.round(s.amount*1.1/1e3)*1e3,i=r-s.amount;return e.jsxs("tr",{children:[e.jsx("td",{style:t,children:s.name}),e.jsx("td",{style:{...t,textAlign:"right"},children:l(r)}),e.jsx("td",{style:{...t,textAlign:"right"},children:l(s.amount)}),e.jsx("td",{style:{...t,textAlign:"right",color:i>=0?"green":"red"},children:i>=0?l(i):`▲${l(Math.abs(i))}`})]},s.code)}),e.jsxs("tr",{style:{backgroundColor:"#ffebee",fontWeight:"bold"},children:[e.jsx("td",{style:t,children:"支出 合計"}),e.jsx("td",{style:{...t,textAlign:"right"},children:l(Math.round(n.totalExpenses*1.1/1e3)*1e3)}),e.jsx("td",{style:{...t,textAlign:"right"},children:l(n.totalExpenses)}),e.jsx("td",{style:{...t,textAlign:"right",color:"green"},children:l(Math.round(n.totalExpenses*1.1/1e3)*1e3-n.totalExpenses)})]})]})]})]})]}),e.jsxs("div",{className:"d-lg-none",style:{marginBottom:30},children:[e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("h5",{style:{backgroundColor:"#e3f2fd",padding:10,margin:0,textAlign:"center",fontWeight:"bold",fontSize:"1rem"},children:"収入の部"}),e.jsx("div",{style:f,children:e.jsxs("table",{style:{...j,minWidth:"400px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[e.jsx("th",{style:{...t,textAlign:"left",fontSize:"12px"},children:"科目"}),e.jsx("th",{style:{...t,textAlign:"center",fontSize:"12px"},children:"予算"}),e.jsx("th",{style:{...t,textAlign:"center",fontSize:"12px"},children:"決算"}),e.jsx("th",{style:{...t,textAlign:"center",fontSize:"12px"},children:"差額"})]})}),e.jsxs("tbody",{children:[n.revenues.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,style:{...t,textAlign:"center",color:"#888",fontSize:"12px"},children:"収入データなし"})}):n.revenues.map(s=>e.jsxs("tr",{children:[e.jsx("td",{style:{...t,fontSize:"12px"},children:s.name}),e.jsx("td",{style:{...t,textAlign:"right",fontSize:"12px"},children:l(s.amount)}),e.jsx("td",{style:{...t,textAlign:"right",fontSize:"12px"},children:l(s.amount)}),e.jsx("td",{style:{...t,textAlign:"right",fontSize:"12px"},children:"0"})]},s.code)),e.jsxs("tr",{style:{backgroundColor:"#e8f5e8",fontWeight:"bold"},children:[e.jsx("td",{style:{...t,fontSize:"12px"},children:"収入 合計"}),e.jsx("td",{style:{...t,textAlign:"right",fontSize:"12px"},children:l(n.totalRevenues)}),e.jsx("td",{style:{...t,textAlign:"right",fontSize:"12px"},children:l(n.totalRevenues)}),e.jsx("td",{style:{...t,textAlign:"right",fontSize:"12px"},children:"0"})]})]})]})})]}),e.jsxs("div",{children:[e.jsx("h5",{style:{backgroundColor:"#ffebee",padding:10,margin:0,textAlign:"center",fontWeight:"bold",fontSize:"1rem"},children:"支出の部"}),e.jsx("div",{style:f,children:e.jsxs("table",{style:{...j,minWidth:"400px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[e.jsx("th",{style:{...t,textAlign:"left",fontSize:"12px"},children:"科目"}),e.jsx("th",{style:{...t,textAlign:"center",fontSize:"12px"},children:"予算"}),e.jsx("th",{style:{...t,textAlign:"center",fontSize:"12px"},children:"決算"}),e.jsx("th",{style:{...t,textAlign:"center",fontSize:"12px"},children:"差額"})]})}),e.jsxs("tbody",{children:[n.expenses.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,style:{...t,textAlign:"center",color:"#888",fontSize:"12px"},children:"支出データなし"})}):n.expenses.map(s=>{const r=Math.round(s.amount*1.1/1e3)*1e3,i=r-s.amount;return e.jsxs("tr",{children:[e.jsx("td",{style:{...t,fontSize:"12px"},children:s.name}),e.jsx("td",{style:{...t,textAlign:"right",fontSize:"12px"},children:l(r)}),e.jsx("td",{style:{...t,textAlign:"right",fontSize:"12px"},children:l(s.amount)}),e.jsx("td",{style:{...t,textAlign:"right",color:i>=0?"green":"red",fontSize:"12px"},children:i>=0?l(i):`▲${l(Math.abs(i))}`})]},s.code)}),e.jsxs("tr",{style:{backgroundColor:"#ffebee",fontWeight:"bold"},children:[e.jsx("td",{style:{...t,fontSize:"12px"},children:"支出 合計"}),e.jsx("td",{style:{...t,textAlign:"right",fontSize:"12px"},children:l(Math.round(n.totalExpenses*1.1/1e3)*1e3)}),e.jsx("td",{style:{...t,textAlign:"right",fontSize:"12px"},children:l(n.totalExpenses)}),e.jsx("td",{style:{...t,textAlign:"right",color:"green",fontSize:"12px"},children:l(Math.round(n.totalExpenses*1.1/1e3)*1e3-n.totalExpenses)})]})]})]})})]})]}),e.jsxs("div",{style:{backgroundColor:"#f8f9fa",border:"2px solid #007bff",borderRadius:8,padding:"15px"},children:[e.jsx("h5",{style:{textAlign:"center",marginBottom:15,color:"#007bff",fontSize:"clamp(1rem, 2.5vw, 1.25rem)"},children:"収支計算のまとめ"}),e.jsxs("div",{style:{fontSize:"clamp(14px, 2vw, 16px)",lineHeight:"1.8"},children:[e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between",children:[e.jsx("strong",{children:"前期繰越金:"}),e.jsx("span",{children:l(o)})]}),e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between",children:[e.jsx("strong",{children:"当期収入合計（決算）:"}),e.jsx("span",{children:l(n.totalRevenues)})]}),e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between",children:[e.jsx("strong",{children:"当期支出合計（決算）:"}),e.jsx("span",{children:l(n.totalExpenses)})]}),e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between",style:{borderTop:"1px solid #ddd",paddingTop:10,marginTop:10},children:[e.jsx("strong",{children:"当期収支差額:"}),e.jsxs("span",{style:{color:c>=0?"green":"red"},children:[c>=0?l(c):`▲${l(Math.abs(c))}`," ",c>=0?"（黒字）":"（赤字）"]})]}),e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between",style:{borderTop:"2px solid #007bff",paddingTop:10,marginTop:10,fontSize:"clamp(16px, 2.5vw, 18px)",fontWeight:"bold"},children:[e.jsx("strong",{children:"次期繰越金:"}),e.jsx("span",{style:{color:"#007bff"},children:l(m)})]})]})]}),e.jsxs("div",{style:{marginTop:20,padding:"10px 15px",backgroundColor:"#fff3cd",borderRadius:5},children:[e.jsx("h6",{style:{color:"#856404",fontSize:"clamp(14px, 2vw, 16px)"},children:"ポイント"}),e.jsxs("ul",{style:{marginBottom:0,color:"#856404",fontSize:"clamp(12px, 1.8vw, 14px)",paddingLeft:"20px"},children:[e.jsxs("li",{children:["収入は予算通りでしたが、支出全体では予算よりも約",l(Math.round(n.totalExpenses*.1)),"少なく抑えられました。"]}),e.jsxs("li",{children:["結果として、この期間単体では",Math.abs(c)>0?l(Math.abs(c)):"0円","の",c>=0?"黒字":"赤字","となりました。"]}),e.jsxs("li",{children:["この次期繰越金（",l(m),"）は、貸借対照表の純資産合計（次期繰越金）と一致しています。"]})]})]})]})};return e.jsxs("div",{className:"container-fluid px-2 px-sm-3",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(w,{value:h,onChange:b})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("label",{className:"form-label mb-0",children:"会計区分"}),e.jsxs("select",{className:"form-select",style:{maxWidth:250},value:p,onChange:d=>N(d.target.value),children:[e.jsx("option",{value:"ALL",children:"全区分表示"}),e.jsx("optgroup",{label:"一般会計",children:e.jsx("option",{value:"KANRI",children:"管理費会計"})}),e.jsxs("optgroup",{label:"特別会計",children:[e.jsx("option",{value:"SHUZEN",children:"修繕積立金会計"}),e.jsx("option",{value:"PARKING",children:"駐車場会計"})]})]})]})})]}),p==="ALL"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle"})," 全会計区分の収支報告書を表示しています"]}),g("管理費会計（一般会計）",v,"KANRI"),u&&u.totalRevenues>0&&g("修繕積立金会計（特別会計）",u,"SHUZEN"),y&&y.totalRevenues>0&&g("駐車場会計（特別会計）",y,"PARKING")]}):p==="KANRI"?g("管理費会計（一般会計）",v,"KANRI"):p==="SHUZEN"?g("修繕積立金会計（特別会計）",u,"SHUZEN"):p==="PARKING"?g("駐車場会計（特別会計）",y,"PARKING"):null]})};export{B as IncomeExpenseReport};
